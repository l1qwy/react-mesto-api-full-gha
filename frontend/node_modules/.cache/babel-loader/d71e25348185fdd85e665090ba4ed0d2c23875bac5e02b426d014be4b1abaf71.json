{"ast":null,"code":"import _slicedToArray from\"C:/Users/L1qwY/dev/react-mesto-auth/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useEffect,useState}from\"react\";import api from\"../../utils/Api\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function EmotionButton(_ref){var likes=_ref.likes,myId=_ref.myId,cardId=_ref.cardId;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isLike=_useState2[0],setIsLike=_useState2[1];var _useState3=useState(likes.length),_useState4=_slicedToArray(_useState3,2),isCountLike=_useState4[0],setIsCountLikes=_useState4[1];useEffect(function(){setIsLike(likes.some(function(item){return myId===item._id;}));},[likes,myId]);function handleLike(){if(isLike){api.unactiveLike(cardId,localStorage.jwt).then(function(res){setIsLike(false);setIsCountLikes(res.likes.length);}).catch(function(error){return console.error(\"Ошибка кнопки лайка\"+error);});}else{api.activeLike(cardId,localStorage.jwt).then(function(res){setIsLike(true);setIsCountLikes(res.likes.length);}).catch(function(error){return console.error(\"Ошибка кнопки лайка\"+error);});}}return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"button\",{className:\"galery__item-emotion \".concat(isLike?'galery__item-emotion_active':''),type:\"button\",\"aria-label\":\"galery-emotion\",onClick:handleLike}),/*#__PURE__*/_jsx(\"span\",{className:\"galery__counter\",children:isCountLike})]});}","map":{"version":3,"names":["useEffect","useState","api","jsx","_jsx","jsxs","_jsxs","EmotionButton","_ref","likes","myId","cardId","_useState","_useState2","_slicedToArray","isLike","setIsLike","_useState3","length","_useState4","isCountLike","setIsCountLikes","some","item","_id","handleLike","unactiveLike","localStorage","jwt","then","res","catch","error","console","activeLike","children","className","concat","type","onClick"],"sources":["C:/Users/L1qwY/dev/react-mesto-auth/src/components/emotionButton/EmotionButton.jsx"],"sourcesContent":["import { useEffect, useState } from \"react\";\r\nimport api from \"../../utils/Api\";\r\n\r\nexport default function EmotionButton({ likes, myId, cardId }) {\r\n  const [isLike, setIsLike] = useState(false);\r\n  const [isCountLike, setIsCountLikes] = useState(likes.length);\r\n\r\n  useEffect(() => {\r\n    setIsLike(likes.some((item) => myId === item._id));\r\n  }, [likes, myId]);\r\n\r\n  function handleLike() {\r\n    if (isLike) {\r\n      api\r\n        .unactiveLike(cardId, localStorage.jwt)\r\n        .then((res) => {\r\n          setIsLike(false);\r\n          setIsCountLikes(res.likes.length);\r\n        })\r\n        .catch((error) => console.error(\"Ошибка кнопки лайка\" + error));\r\n    } else {\r\n      api\r\n        .activeLike(cardId, localStorage.jwt)\r\n        .then((res) => {\r\n          setIsLike(true);\r\n          setIsCountLikes(res.likes.length);\r\n        })\r\n        .catch((error) => console.error(\"Ошибка кнопки лайка\" + error));\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <button\r\n        className={`galery__item-emotion ${isLike ? 'galery__item-emotion_active' : ''}`}\r\n        type=\"button\"\r\n        aria-label=\"galery-emotion\"\r\n        onClick={handleLike}\r\n      />\r\n      <span className=\"galery__counter\">{isCountLike}</span>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"yHAAA,OAASA,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAC3C,MAAO,CAAAC,GAAG,KAAM,iBAAiB,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAElC,cAAe,SAAS,CAAAC,aAAaA,CAAAC,IAAA,CAA0B,IAAvB,CAAAC,KAAK,CAAAD,IAAA,CAALC,KAAK,CAAEC,IAAI,CAAAF,IAAA,CAAJE,IAAI,CAAEC,MAAM,CAAAH,IAAA,CAANG,MAAM,CACzD,IAAAC,SAAA,CAA4BX,QAAQ,CAAC,KAAK,CAAC,CAAAY,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAApCG,MAAM,CAAAF,UAAA,IAAEG,SAAS,CAAAH,UAAA,IACxB,IAAAI,UAAA,CAAuChB,QAAQ,CAACQ,KAAK,CAACS,MAAM,CAAC,CAAAC,UAAA,CAAAL,cAAA,CAAAG,UAAA,IAAtDG,WAAW,CAAAD,UAAA,IAAEE,eAAe,CAAAF,UAAA,IAEnCnB,SAAS,CAAC,UAAM,CACdgB,SAAS,CAACP,KAAK,CAACa,IAAI,CAAC,SAACC,IAAI,QAAK,CAAAb,IAAI,GAAKa,IAAI,CAACC,GAAG,GAAC,CAAC,CACpD,CAAC,CAAE,CAACf,KAAK,CAAEC,IAAI,CAAC,CAAC,CAEjB,QAAS,CAAAe,UAAUA,CAAA,CAAG,CACpB,GAAIV,MAAM,CAAE,CACVb,GAAG,CACAwB,YAAY,CAACf,MAAM,CAAEgB,YAAY,CAACC,GAAG,CAAC,CACtCC,IAAI,CAAC,SAACC,GAAG,CAAK,CACbd,SAAS,CAAC,KAAK,CAAC,CAChBK,eAAe,CAACS,GAAG,CAACrB,KAAK,CAACS,MAAM,CAAC,CACnC,CAAC,CAAC,CACDa,KAAK,CAAC,SAACC,KAAK,QAAK,CAAAC,OAAO,CAACD,KAAK,CAAC,qBAAqB,CAAGA,KAAK,CAAC,GAAC,CACnE,CAAC,IAAM,CACL9B,GAAG,CACAgC,UAAU,CAACvB,MAAM,CAAEgB,YAAY,CAACC,GAAG,CAAC,CACpCC,IAAI,CAAC,SAACC,GAAG,CAAK,CACbd,SAAS,CAAC,IAAI,CAAC,CACfK,eAAe,CAACS,GAAG,CAACrB,KAAK,CAACS,MAAM,CAAC,CACnC,CAAC,CAAC,CACDa,KAAK,CAAC,SAACC,KAAK,QAAK,CAAAC,OAAO,CAACD,KAAK,CAAC,qBAAqB,CAAGA,KAAK,CAAC,GAAC,CACnE,CACF,CAEA,mBACE1B,KAAA,QAAA6B,QAAA,eACE/B,IAAA,WACEgC,SAAS,yBAAAC,MAAA,CAA0BtB,MAAM,CAAG,6BAA6B,CAAG,EAAE,CAAG,CACjFuB,IAAI,CAAC,QAAQ,CACb,aAAW,gBAAgB,CAC3BC,OAAO,CAAEd,UAAW,CACrB,CAAC,cACFrB,IAAA,SAAMgC,SAAS,CAAC,iBAAiB,CAAAD,QAAA,CAAEf,WAAW,CAAO,CAAC,EACnD,CAAC,CAEV"},"metadata":{},"sourceType":"module","externalDependencies":[]}